<script src="arquivos.js"></script>

<div class="row">
    <div class="input-group">
        <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupFileAddon01">Pasta para Scanear: </span>
        </div>
        <div class="custom-file">
            <input directory webkitdirectory type="file" class="custom-file-input" id="pasta_xmls" aria-describedby="inputGroupFileAddon01">
            <label class="custom-file-label" for="pasta_xmls">Selecione a Pasta</label>
        </div>
    </div>
</div>

<div id="sumario_arquivos" style="display: none;">

    <h3>Sumários de Arquivos:</h3><br>
    <b>Nº de Arquivos: </b><label id="n_arquivos">0</label><br>
    <b>% de Arquivos Processados: </b><label id="porcentagem_arquivos">0%</label><br>
    <b>Tempo Decorrido: </b><label id="tempo_decorrido">00:00:00</label><br>

	<div class="row">
		<div class="col" style="text-align: center;">	
			<button type="button" class="btn btn-success" id="processar" onclick="loadXMLDoc();">PROCESSAR</button>
		</div>
	</div>

    <div class="row" id="informacoes_importacao"></div>

</div>

<script type="text/javascript">   



$("#pasta_xmls").change(function(event) {
var array = [];

for (var i = 0; i < $("#pasta_xmls")[0].files.length;i++) {
     array.push($("#pasta_xmls")[0].files[i].path.split('.').pop());
     
 }              //LAÇO FOR VAI PEGAR SÓ AS EXTENSOES DOS ARQUIVOS.
console.log(array);
                 //DAQUI
let indices = [];
let element = 'xml';
let ids = array.indexOf(element);
while (ids != -1) {
  indices.push(ids);
  ids = array.indexOf(element, ids + 1);
}       
console.log(indices);
                      //ATÉ AQUI É VAI FAZER A FILTRAGEM ONDE VAI SALVAR O INDICE ONDE OS ARQUIVOS SÃO XML.
for (var y = 0; y < indices.length; y++) {
    var esc = indices[y];
    console.log(esc);    
} //AQUI SERIA O LAÇO FOR ONDE VAI PEGAR O INDICE DO ARRAY E INSERIR NA PARTE ONDE BUSCA O ARQUIVO NO INDICE DESEJADO.
   
   $("#sumario_arquivos").css({
        display: 'block'
    });
$(".custom-file-label").html($("#pasta_xmls")[0].files[0].path.replace($("#pasta_xmls")[0].files[0].path.split("\\")[$("#pasta_xmls")[0].files[0].path.split("\\").length - 1], ""));
    $("#n_arquivos").html($("#pasta_xmls")[0].files.length);

 
});



</script>
<style type="text/css">
.custom-file-label::after {
    display: none;
}
td, th{
    white-space: nowrap !important;
}
</style>

