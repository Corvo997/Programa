<link href="css/style.css" rel='stylesheet' type='text/css' />

    <div class="row">
        <div class="col">
            <div class="wrapper"> 
                <div style="float: right;" id="nselecionou" class="box">
                   <label id="title">Não selecionadas</label>
                	<div campo="cUF" draggable="true" class="opcao">
                	 <label>Código da UF</label>	
                	</div>
                	<div campo="cNF" draggable="true" class="opcao">
                		<label>Código Numérico</label>
                	</div>
                	<div campo="natOp" draggable="true" class="opcao">
                		<label>Naturezaa da Operação</label>
                	</div>
                	<div campo="indPag" draggable="true" class="opcao">
                		<label>Forma de Pagamento</label>
                	</div>
                	<div campo="mod" draggable="true" class="opcao">
                		<label>Modelo Documento Fiscal</label>
                	</div>
                	<div campo="serie" draggable="true" class="opcao">
                		<label>Série do Documento</label>
                	</div>
                	<div campo="nNF" draggable="true" class="opcao">
                		<label>Número do Documento</label>
                	</div>
                	<div campo="dhEmi" draggable="true" class="opcao">
                		<label>Data de emissão</label>
                	</div>
                	<div campo="dhSaiEnt" draggable="true" class="opcao">
                		<label>Data de saída ou entrada</label>
                	</div>
                	<div campo="tpNF" draggable="true" class="opcao">
                		<label>Tipo de operação</label>
                	</div>
                	<div campo="cMunFG" draggable="true" class="opcao">
                		<label>Código do Município</label>
                	</div>
                	<div campo="tpImp" draggable="true" class="opcao">
                		<label>Formato de Impressão</label>
                	</div>
                	<div campo="tpEmis" draggable="true" class="opcao">
                		<label>Tipo de Emissão</label>
                	</div>
                	<div campo="cDV" draggable="true" class="opcao">
                		<label>Dígito Verificador</label>
                	</div>
                	<div campo="tpAmb" draggable="true" class="opcao">
                		<label>Identificação do Ambiente</label>
                	</div>
                	<div campo="finNFe" draggable="true" class="opcao">
                		<label>Finalidade de emissão</label>
                	</div>
                	<div campo="idDest" draggable="true" class="opcao">
                		<label>Id do Destinatário</label>
                	</div>
                	<div campo="indFinal" draggable="true" class="opcao">
                		<label>Índice Final</label>
                	</div>
                	<div campo="indPres" draggable="true" class="opcao">
                		<label>Índice Pres</label> 
                	</div>
                	<div campo="procEmi" draggable="true" class="opcao">
                		<label>Processo de emissão</label>
                	</div>
                	<div campo="verProc" draggable="true" class="opcao">
                		<label>Versão do Processo</label>
                	</div>
                	<div campo="emitCNPJ" draggable="true" class="opcao">
                		<label>CNPJ do emitente</label>
                	</div>
                	<div campo="emitCPF" draggable="true" class="opcao">
                		<label>CPF do emitente</label>
                	</div>
                	<div campo="emitxNome" draggable="true" class="opcao">
                		<label>Nome do Emitente</label>
                	</div>
                	<div campo="emitxFant" draggable="true" class="opcao">
                		<label>Nome Fantasia do Emitente</label>
                	</div>
                	<div campo="emitxLgr" draggable="true" class="opcao">
                		<label>Logradouro Emitente</label>
                	</div>
                	<div campo="emitnro" draggable="true" class="opcao">
                		<label>Número Emitente</label>
                	</div>
                	<div campo="emitxBairro" draggable="true" class="opcao">
                		<label>Bairro Emitente</label>
                	</div>
                	<div campo="emitcMun" draggable="true" class="opcao">
                		<label>Código do município do Emitente</label>
                	</div>
                	<div campo="emitxMun" draggable="true" class="opcao">
                		<label>Nome do município do emitente</label>
                	</div>
                	<div campo="emitUF" draggable="true" class="opcao">
                		<label>UF Emitente</label>
                	</div>
                	<div campo="emitCEP" draggable="true" class="opcao">
                		<label>CEP Emitente</label>
                	</div>
                	<div campo="emitcPais" draggable="true" class="opcao">
                		<label>Código País Emitente</label>
                	</div>
                	<div campo="emitxPais" draggable="true" class="opcao">
                		<label>Nome País Emitente</label>
                	</div>
                	<div campo="emitfone" draggable="true" class="opcao">
                		<label>Telefone Emitente</label>
                	</div>
                	<div campo="emitIE" draggable="true" class="opcao">
                		<label>IE Emitente</label>
                	</div>
                	<div campo="emitCRT" draggable="true" class="opcao">
                		<label>Código de Regime Tributário Emitente</label>
                	</div>
                	<div campo="emitxCpl" draggable="true" class="opcao">
                		<label>Complemento Emitente</label>
                	</div>
                	<div campo="destCNPJ" draggable="true" class="opcao">
                		<label>CNPJ do Destinatário</label>
                	</div>
                	<div campo="destCPF" draggable="true" class="opcao">
                		<label>CPF do Destinatário</label>
                	</div>
                	<div campo="destxNome" draggable="true" class="opcao">
                		<label>Nome do Destinatário</label>
                	</div>
                	<div campo="destxFant" draggable="true" class="opcao">
                		<label>Nome Fantasia do Destinatário</label>
                	</div>
                	<div campo="destLgr" draggable="true" class="opcao">
                		<label>Logradouro do Destinatário</label>
                	</div>
                	<div campo="destnro" draggable="true" class="opcao">
                		<label>Número do Destinatário</label>
                	</div>
                	<div campo="destxBairro" draggable="true" class="opcao">
                		<label>Bairro Destinatário</label>
                	</div>
                	<div campo="destcMun" draggable="true" class="opcao">
                		<label>Código Município Destinatário</label>
                	</div>
                	<div campo="destxMun" draggable="true" class="opcao">
                		<label>Nome município Destinatário</label>
                	</div>
                	<div campo="destUF" draggable="true" class="opcao">
                		<label>UF Destinatário</label>
                	</div>
                	<div campo="destCEP" draggable="true" class="opcao">
                		<label>CEP Destinatário</label>
                	</div>
                	<div campo="destcPais" draggable="true" class="opcao">
                		<label>Código País Destinatário</label>
                	</div>
                	<div campo="destxPais" draggable="true" class="opcao">
                		<label>Nome País Destinatário</label>
                	</div>
                	<div campo="destFone" draggable="true" class="opcao">
                		<label>Fone Destinatário</label>
                	</div>
                	<div campo="destIE" draggable="true" class="opcao">
                		<label>IE Destinatário</label>
                	</div>
                	<div campo="destCpl" draggable="true" class="opcao">
                		<label>Complemento do Destinatário</label>
                	</div>
                	<div campo="cProd" draggable="true" class="opcao">
                		<label>Código do Produto</label>
                	</div>
                	<div campo="xProd" draggable="true" class="opcao">
                		<label>Descrição do Produto</label>
                	</div>
                	<div campo="NCM" draggable="true" class="opcao">
                		<label>Código NCM</label>
                	</div>
                	<div campo="CFOP" draggable="true" class="opcao">
                		<label>Código Fiscal de Operações</label>
                	</div>
                	<div campo="uCom" draggable="true" class="opcao">
                		<label>Unidade Comercial</label>
                	</div>
                	<div campo="qCom" draggable="true" class="opcao">
                		<label>Quantidade Comercial</label>
                	</div>
                	<div campo="vUnCom" draggable="true" class="opcao">
                		<label>Valor Unitário de Comercialização</label>
                	</div>
                	<div campo="vProd" draggable="true" class="opcao">
                		<label>Valor Toal Bruto</label>
                	</div>
                	<div campo="uTrib" draggable="true" class="opcao">
                		<label>Unidade Tributável</label>
                	</div>
                	<div campo="qTrib" draggable="true" class="opcao">
                		<label>Quantidade Tributável</label>
                	</div>
                	<div campo="vUnTrib" draggable="true"class="opcao">
                		<label>Valor Unitário de tributação</label>
                	</div>
                	<div campo="vOutro" draggable="true" class="opcao">
                		<label>Outras despesas</label>
                	</div>
                	<div campo="indTot" draggable="true" class="opcao">
                		<label>Indicador de entrada do item no total</label>
                	</div>
                	<div campo="ICMSorig" draggable="true" class="opcao">
                		<label>Origem da mercadoria ICMS</label>
                	</div>
                	<div campo="ICMSCST" draggable="true" class="opcao">
                		<label>Tributação ICMS</label>
                	</div>
                	<div campo="ICMSmodBC" draggable="true" class="opcao">
                		<label>Modalidade BC do ICMS</label>
                	</div>
                	<div campo="ICMSvBC" draggable="true" class="opcao">
                		<label>Valor da BC ICMS</label>
                	</div>
                	<div campo="pICMS" draggable="true" class="opcao">
                		<label>Alíquota do ICMS</label>
                	</div>
                	<div campo="vICMS" draggable="true" class="opcao">
                		<label>Valor do ICMS</label>
                	</div>
                	<div campo="ICMSvBCSTRet" draggable="true" class="opcao">
                		<label>Valor BC do ICMS ST retido</label>
                	</div>
                	<div campo="vICMSSTRet" draggable="true" class="opcao">
                		<label>Valor do ICMS retido</label>
                	</div>
                	<div campo="PISCST" draggable="true" class="opcao">
                		<label>Tributação do PIS</label>
                	</div>
                	<div campo="PISvBC" draggable="true" class="opcao">
                		<label>Valor BC do PIS</label>
                	</div>
                	<div campo="pPIS" draggable="true" class="opcao">
                		<label>Alíquota do PIS(percentual)</label>
                	</div>
                	<div campo="vPIS" draggable="true" class="opcao">
                		<label>Valor do PIS</label>
                	</div>
                	<div campo="PISqBCProd" draggable="true" class="opcao">
                		<label>Quantidade Vendida PIS</label>
                	</div>
                	<div campo="PISvAliqProd" draggable="true"class="opcao">
                		<label>Alíquota do PIS(reais)</label>
                	</div>
                	<div campo="COFINSCST" draggable="true" class="opcao">
                		<label>Tributação COFINS</label>
                	</div>
                	<div campo="COFINSvBC" draggable="true" class="opcao">
                		<label>Valor BC da COFINS</label>
                	</div>
                	<div campo="pCOFINS" draggable="true" class="opcao">
                		<label>Alíquota da COFINS(percentual)</label>
                	</div>
                	<div campo="vCOFINS" draggable="true" class="opcao">
                		<label>Valor do COFINS</label>
                	</div>
                	<div campo="COFINSqBCProd" draggable="true" class="opcao">
                		<label>Quantidade Vendida COFINS</label>
                	</div>
                	<div campo="COFINSvAliqProd" class="opcao">
                		<label>Alíquota do COFINS(reais)</label>
                	</div>
                	<div campo="totalvBC" draggable="true" class="opcao">
                		<label>BC total do ICMS</label>
                	</div>
                	<div campo="totalvICMS" draggable="true"class="opcao">
                		<label>Valor Total do ICMS</label>
                	</div>
                	<div campo="totalvBCST" draggable="true" class="opcao">
                		<label>BC do ICMS ST Total</label>
                	</div>
                	<div campo="totalvST" draggable="true" class="opcao">
                		<label>Valor Total do ICMS ST</label>
                	</div>
                	<div campo="totalvProd" draggable="true" class="opcao">
                		<label>Valor Total dos Produtos</label>
                	</div>
                	<div campo="totalvFrete" draggable="true" class="opcao">
                		<label>Valor Total do Frete</label>
                	</div>
                	<div campo="totalvSeg" draggable="true" class="opcao">
                		<label>Valor Total do Seguro</label>
                	</div>
                	<div campo="totalvDesc" draggable="true" class="opcao">
                		<label>Valor Total do Desconto</label>
                	</div>
                	<div campo="totalvII" draggable="true" class="opcao">
                		<label>Valor Total do II</label>
                	</div>
                	<div campo="totalvIPI" draggable="true"class="opcao">
                		<label>Valor Total do IPI</label>
                	</div>
                	<div campo="totalvPIS" draggable="true" class="opcao">
                		<label>Valor do PIS</label>
                	</div>
                	<div campo="totalvCOFINS" draggable="true" class="opcao">
                		<label>Valor do COFINS</label>
                	</div>
                	<div campo="totalvOutro" draggable="true" class="opcao">
                		<label>Total de Outras Despesas</label>
                	</div>
                	<div campo="totalvNF" draggable="true" class="opcao">
                		<label>Valor Total da NF</label>
                	</div>
                	<div campo="totalvFCPUFDest" draggable="true" class="opcao">
                		<label>Valor Total FCP UF Destinatário</label>
                	</div>
                	<div campo="totalvICMSUFRemet" draggable="true" class="opcao">
                		<label>Valor Total ICMS UF Remetente </label>
                	</div>
                	<div campo="totalvICMSDeson" draggable="true" class="opcao">
                		<label>Valor Total do ICMS Deson</label>
                	</div>
                	<div campo="totalvICMSUFDest" draggable="true" class="opcao">
                		<label>Valor Totaldo ICMS UF Destinatário</label>
                	</div>
                	<div campo="transpmodFrete" draggable="true" class="opcao">
                		<label>Modalidade do frete</label>
                	</div>
                	<div campo="transpCNPJ" draggable="true" class="opcao">
                		<label>CNPJ do Transporte</label>
                	</div>
                	<div campo="transpCPF" draggable="true" class="opcao">
                		<label>CPF do Transporte</label>
                	</div>
                	<div campo="transpxNome" draggable="true" class="opcao">
                		<label>Nome do Transporte</label>
                	</div>
                	<div campo="transpIE" draggable="true" class="opcao">
                		<label>Inscrição Estadual do Transporte</label>
                	</div>
                	<div campo="transpxEnder" draggable="true" class="opcao">
                		<label>Endereço Completo do Transporte</label>
                	</div>
                	<div campo="transpxMun" draggable="true" class="opcao">
                		<label>Nome do Município do Transporte</label>
                	</div>
                	<div campo="transpUF" draggable="true" class="opcao">
                		<label>UF do Transporte</label>
                	</div>
                	<div campo="transpplaca" draggable="true"class="opcao">
                		<label>Placa do Veículo</label>
                	</div>
                	<div campo="transpUF" draggable="true" class="opcao">
                		<label>UF do Veículo</label>
                	</div>
                	<div campo="transpqVol" draggable="true" class="opcao">
                		<label>Quantidade de volumes transportados</label>
                	</div>
                	<div campo="transpesp" draggable="true" class="opcao">
                		<label>Espécie dos volumes transportados</label>
                	</div>
                	<div campo="transppesoL" draggable="true"class="opcao">
                		<label>Peso Líquido</label>
                	</div>
                	<div campo="transppesoB" draggable="true" class="opcao">
                		<label>Peso Bruto</label>
                	</div>
                	<div campo="cobrnFat" draggable="true" class="opcao">
                		<label>Número da Fatura</label>
                	</div>
                	<div campo="cobrvOrig" draggable="true" class="opcao">
                		<label>Valor Original da Fatura</label>
                	</div>
                	<div campo="cobrvLiq" draggable="true" class="opcao">
                		<label>Valor Líquido da Fatura</label>
                	</div>
                	<div campo="cobrnDup" draggable="true"class="opcao">
                		<label>Número da Duplicata</label>
                	</div>
                </div>
            </div>
        </div>
        <div class="col">
            <div id="selecionou" class="box">
            	<label id="title">Selecionadas</label>
                	<div campo="cobrdVenc" draggable="true" class="opcao">
                		<label>Data de Vencimento</label>
                	</div>
                	<div campo="cobrvDup" draggable="true" class="opcao">
                		<label>Valor da duplicata</label>
                	</div>
                	<div campo="InfCpl" draggable="true" class="opcao">
                		<label>Informações Complementares</label>
                	</div>
            </div>        
        </div>
    </div>
    <div class="row">
        <div class="col" style="text-align: center;">
            <input type="button" class="btn btn-success" onclick="FiltrarColunas();" name="filtrar" id="filtro" value="Filtrar">
        </div>
    </div>

    
    
 <script type="text/javascript">

    function FiltrarColunas(){

        colunas = $("#selecionou div");

        label_colunas = [];

        for(i = 0; i < colunas.length; i++){

            label_colunas.push(colunas.eq(i).attr("campo"));

        }

        console.log(label_colunas); //ISSO AQUI SÃO TODAS AS COLUNAS QUE ELA SELECIONOU

        colunas_sql = label_colunas.join();

        console.log(colunas_sql); //TU VAI JOGAR ISSO NO SQL

    }

    var dropTarget = document.querySelector(".wrapper");
    var drag = document.querySelectorAll(".opcao");

    for(let i = 0; i<drag.length; i++){
    	drag[i].addEventListener("dragstart", function(ev){
    		ev.dataTransfer.setData("srcId", ev.target.id);
    	});
    }
    
    dropTarget.addEventListener("dragover", function(ev){
    	ev.preventDefault();
    });

    dropTarget.addEventListener("drop", function(ev){
    	ev.preventDefault();
    	let target = ev.target;
    	let srcId = ev.dataTransfer.getData("srcId");

    	let droppable = target.classList.contains("box");

    	if(droppable){
    		target.appendChild(document.getElementById(srcId));
    	}
    });


    function dragStart(ev){
      
    }
    function dragOver(ev){
      
    }
    function dragDrop(acao){
    	
    }

	function exportarParaExcel() {

    array_teste = `SELECT * FROM nota_fiscal INNER JOIN produto ON id_nota_fiscal = id`;

	dados = [];


	db.all(array_teste, [], (err, rows) => {
	  if (err) {
	    throw err;
	  }
	  rows.forEach((row) => {
	  	dados.push(Object.keys(row).map(function(_) { return row[_]; }));
	  });
		csvContent = "data:text/csv;charset=utf-8," 
	    + dados.map(e => e.join(";")).join("\n");
		var encodedUri = encodeURI(csvContent);
		var link = document.createElement("a");
		link.setAttribute("href", encodedUri);
		link.setAttribute("download", "my_data.csv");
		document.body.appendChild(link); // Required for FF

		link.click(); // This will download the data file named "my_data.csv".
	});

	}

	// exportarParaExcel();
    
   
  
    
</script>